---
description: overview about this project.
globs: 
alwaysApply: false
---
# å…«å­—è®¡ç®—MCPæœåŠ¡å™¨é¡¹ç›®æŒ‡å—

## ğŸ¯ é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºTypeScriptçš„ä¸“ä¸šå…«å­—è®¡ç®—MCPæœåŠ¡å™¨ï¼Œä½¿ç”¨`lunar-javascript`åº“æä¾›å…«å­—è®¡ç®—æœåŠ¡ã€‚é¡¹ç›®å·²å®Œæˆç°ä»£åŒ–APIå‡çº§ï¼Œé‡‡ç”¨æœ€æ–°MCP SDKï¼Œå¯é€šè¿‡npmåŒ…`@mymcp-fun/bazi@2.0.2`ä¸€è¡Œå‘½ä»¤ä½¿ç”¨ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

### æ ¸å¿ƒæºä»£ç 
- [src/server.ts](mdc:src/server.ts) - MCPæœåŠ¡å™¨ä¸»å…¥å£ï¼Œä½¿ç”¨æ–°ç‰ˆMcpServer APIå’ŒregisterToolæ–¹æ³•
- [src/bazi-service.ts](mdc:src/bazi-service.ts) - å…«å­—è®¡ç®—æ ¸å¿ƒæœåŠ¡ï¼ŒåŒ…è£…lunar-javascriptåº“
- [src/types.ts](mdc:src/types.ts) - TypeScriptç±»å‹å®šä¹‰ï¼ŒåŒ…å«è¾“å…¥è¾“å‡ºæ¥å£

### é…ç½®æ–‡ä»¶
- [package.json](mdc:package.json) - npmåŒ…é…ç½®ï¼Œä¾èµ–ç®¡ç†ï¼Œæ„å»ºè„šæœ¬
- [tsconfig.json](mdc:tsconfig.json) - TypeScriptå¼€å‘é…ç½®
- [tsconfig.build.json](mdc:tsconfig.build.json) - TypeScriptç”Ÿäº§æ„å»ºé…ç½®

### æµ‹è¯•æ–‡ä»¶
- [tests/final-accuracy-test.js](mdc:tests/final-accuracy-test.js) - æœ€ç»ˆå‡†ç¡®æ€§æµ‹è¯•ï¼ŒéªŒè¯100%å…¼å®¹æ€§
- [tests/test-mcp-server.js](mdc:tests/test-mcp-server.js) - MCPæœåŠ¡å™¨åŠŸèƒ½æµ‹è¯•
- [tests/basic-functionality.js](mdc:tests/basic-functionality.js) - åŸºç¡€åŠŸèƒ½æµ‹è¯•
- [tests/test-lunar-javascript.js](mdc:tests/test-lunar-javascript.js) - lunar-javascriptåº“APIæµ‹è¯•

### æ–‡æ¡£
- [README.md](mdc:README.md) - é¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼ŒåŒ…å«å®‰è£…ä½¿ç”¨æŒ‡å—
- [LICENSE](mdc:LICENSE) - MITå¼€æºè®¸å¯è¯

## ğŸ”§ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–
- **@modelcontextprotocol/sdk**: æœ€æ–°MCPåè®®SDKï¼Œä½¿ç”¨McpServerç±»
- **zod**: SchemaéªŒè¯åº“ï¼Œç‰ˆæœ¬3.25.67+
- **lunar-javascript**: æƒå¨çš„ä¸­æ–‡å†œå†è®¡ç®—åº“ï¼Œ1600+å‘¨ä¸‹è½½é‡
- **TypeScript**: ç±»å‹å®‰å…¨çš„JavaScriptè¶…é›†ï¼Œç‰ˆæœ¬5.0+
- **Node.js**: è¿è¡Œç¯å¢ƒï¼Œè¦æ±‚18.0+

### ç°ä»£åŒ–APIç‰¹æ€§
- âœ… **McpServerç±»**: æ›¿ä»£æ—§ç‰ˆServerç±»ï¼Œæ›´ç®€æ´çš„API
- âœ… **registerToolæ–¹æ³•**: è‡ªåŠ¨å¤„ç†MCPåè®®ç»†èŠ‚
- âœ… **ZodéªŒè¯**: å†…ç½®å‚æ•°éªŒè¯å’Œç±»å‹å®‰å…¨
- âœ… **ç®€åŒ–ä»£ç **: ä»173è¡Œå‡å°‘åˆ°89è¡Œï¼ˆ48%ç¼©å‡ï¼‰

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### MCPå·¥å…·: get_bazi_details
è®¡ç®—ç”Ÿè¾°å…«å­—å’Œäº”è¡Œä¿¡æ¯çš„ä¸»è¦å·¥å…·

**è¾“å…¥å‚æ•°**:
```typescript
interface BaziToolInput {
  year: number;        // å‡ºç”Ÿå¹´ä»½ (1900-2100)
  month: number;       // å‡ºç”Ÿæœˆä»½ (1-12)
  day: number;         // å‡ºç”Ÿæ—¥æœŸ (1-31)
  hour: number;        // å‡ºç”Ÿæ—¶é—´ (0-23)
  gender?: string;     // æ€§åˆ« (å¯é€‰ï¼Œé»˜è®¤male)
  timezone?: string;   // æ—¶åŒº (å¯é€‰ï¼Œé»˜è®¤Asia/Shanghai)
}
```

**è¾“å‡ºç»“æœ** (ä½¿ç”¨ä¸­æ–‡å­—æ®µå):
```typescript
interface BaziResult {
  å››æŸ±: {              // å››æŸ±ä¿¡æ¯
    å¹´æŸ±: string;      // å¹´æŸ±ï¼Œå¦‚"ä¹™é…‰"
    æœˆæŸ±: string;      // æœˆæŸ±ï¼Œå¦‚"å·±ä¸‘"
    æ—¥æŸ±: string;      // æ—¥æŸ±ï¼Œå¦‚"ä¸å·³"
    æ—¶æŸ±: string;      // æ—¶æŸ±ï¼Œå¦‚"å£¬å­"
  };
  äº”è¡Œ: {              // äº”è¡Œåˆ†æï¼ˆæ•´æ•°è®¡æ•°ï¼‰
    æœ¨: number;        // æœ¨ï¼Œå¦‚1
    ç«: number;        // ç«ï¼Œå¦‚2
    åœŸ: number;        // åœŸï¼Œå¦‚2
    é‡‘: number;        // é‡‘ï¼Œå¦‚1
    æ°´: number;        // æ°´ï¼Œå¦‚2
  };
  ç”Ÿè‚–: string;        // ç”Ÿè‚–ï¼Œå¦‚"é¸¡"
  æ˜Ÿåº§: string;        // æ˜Ÿåº§ï¼Œå¦‚"æ°´ç“¶"
  å†œå†: {              // å†œå†æ—¥æœŸ
    å†œå†å¹´: number;
    å†œå†æœˆ: number;
    å†œå†æ—¥: number;
    æ˜¯å¦é—°æœˆ: boolean;
    å†œå†æœˆå: string;  // å¦‚"è…Šæœˆ"
  };
  æ—¥ä¸»: string;        // æ—¥ä¸»å¤©å¹²ï¼Œå¦‚"ä¸"
}
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### ç›´æ¥è¿è¡Œ
```bash
npx @mymcp-fun/bazi
```

### Claude Desktopé…ç½®
```json
{
  "mcpServers": {
    "bazi": {
      "command": "npx",
      "args": ["-y", "@mymcp-fun/bazi"]
    }
  }
}
```

## ğŸ”¨ å¼€å‘æŒ‡å—

### æ„å»ºé¡¹ç›®
```bash
npm run build
```

### å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### è¿è¡Œæµ‹è¯•
```bash
# æ‰€æœ‰æµ‹è¯•
npm test

# å•ç‹¬æµ‹è¯•
npm run test:accuracy   # å‡†ç¡®æ€§æµ‹è¯•
npm run test:mcp       # MCPæœåŠ¡å™¨æµ‹è¯•
npm run test:basic     # åŸºç¡€åŠŸèƒ½æµ‹è¯•
npm run test:lunar     # lunar-javascript APIæµ‹è¯•
```

## ğŸ“Š é¡¹ç›®æˆå°±

### APIç°ä»£åŒ–å‡çº§
- âœ… **æ–°ç‰ˆMCP SDK**: å‡çº§åˆ°McpServer + registerTool API
- âœ… **ä»£ç ç®€åŒ–**: 48%ä»£ç å‡å°‘ï¼Œæ›´æ˜“ç»´æŠ¤
- âœ… **ZodéªŒè¯**: ç°ä»£åŒ–å‚æ•°éªŒè¯
- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´TypeScriptç±»å‹å®šä¹‰

### æŠ€æœ¯æˆå°±
- âœ… **100%å‡†ç¡®ç‡**: ä¸ä¼ ç»Ÿç®—æ³•å®Œå…¨ä¸€è‡´
- âœ… **é›¶ä¾èµ–é—®é¢˜**: åŸºäºç¨³å®šçš„lunar-javascriptåº“
- âœ… **MCPåè®®å…¼å®¹**: æ”¯æŒæ‰€æœ‰æ ‡å‡†MCPå®¢æˆ·ç«¯
- âœ… **ä¸­æ–‡æœ¬åœ°åŒ–**: ä½¿ç”¨ä¸­æ–‡å­—æ®µåï¼Œç¬¦åˆç”¨æˆ·ä¹ æƒ¯

### ç”¨æˆ·ä½“éªŒ
- âœ… **ä¸€è¡Œå‘½ä»¤å¯åŠ¨**: æ— éœ€å¤æ‚ç¯å¢ƒé…ç½®
- âœ… **è·¨å¹³å°å…¼å®¹**: æ”¯æŒWindows/macOS/Linux
- âœ… **ç°ä»£åŒ–åŒ…ç®¡ç†**: æ ‡å‡†npmç”Ÿæ€

### è´¨é‡ä¿è¯
- âœ… **å…¨é¢æµ‹è¯•è¦†ç›–**: 4ç§æµ‹è¯•åœºæ™¯éªŒè¯
- âœ… **ä¸“ä¸šæ–‡æ¡£**: è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œæ­£ç¡®ç¤ºä¾‹
- âœ… **å¼€æºåè®®**: MITè®¸å¯è¯ï¼Œå•†ä¸šå‹å¥½

## ğŸ” è°ƒè¯•æŒ‡å—

### æœ¬åœ°è°ƒè¯•
1. è¿è¡Œæ„å»ºï¼š`npm run build`
2. å¯åŠ¨æœåŠ¡å™¨ï¼š`node dist/server.js`
3. æŸ¥çœ‹stderræ—¥å¿—è¾“å‡º

### MCP Inspector
ä½¿ç”¨å®˜æ–¹MCP Inspectorå·¥å…·è¿›è¡Œäº¤äº’å¼è°ƒè¯•ï¼š
```bash
npx @modelcontextprotocol/inspector
```

### æµ‹è¯•ç‰¹å®šåœºæ™¯
ä¿®æ”¹æµ‹è¯•æ–‡ä»¶ä¸­çš„æ—¥æœŸæ—¶é—´å‚æ•°ï¼ŒéªŒè¯ä¸åŒæ¡ˆä¾‹çš„è®¡ç®—ç»“æœã€‚

## ğŸ”„ æœ€æ–°æ›´æ–°å†å²

### v2.0.2 (å½“å‰ç‰ˆæœ¬)
- ğŸ”§ ç®€åŒ–ç‰ˆæœ¬æè¿°
- ğŸ“ ä¿®å¤README.mdè¿”å›ç»“æœç¤ºä¾‹
- âœ… æ›´æ–°æ–‡æ¡£ä¸­çš„å­—æ®µåä¸ºä¸­æ–‡

### v2.0.1
- ğŸš€ å®ŒæˆMCP SDK APIå‡çº§
- âš¡ ä»£ç ä¼˜åŒ–ï¼Œå‡å°‘48%è¡Œæ•°
- ğŸ›¡ï¸ æ·»åŠ ZodéªŒè¯
- ğŸ—‘ï¸ ç§»é™¤ä¸å¿…è¦çš„ä¸»æ¨¡å—æ£€æµ‹é€»è¾‘

---
**é¡¹ç›®çŠ¶æ€**: å·²å®Œæˆå¹¶å¯ç”Ÿäº§ä½¿ç”¨  
**å½“å‰ç‰ˆæœ¬**: 2.0.2  
**ç»´æŠ¤ç­–ç•¥**: å®šæœŸæ›´æ–°ä¾èµ–ï¼Œä¿®å¤å‘ç°çš„é—®é¢˜  
**è”ç³»æ–¹å¼**: howard@mymcp.fun
